<!DOCTYPE html>
<html>
<head>
  <title>AHS Grade Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Harys Dalvi">
  <meta name="description" content="Free Grade Calculator">
  <meta charset="utf-8">
  <link rel="icon" href="favicon.ico">
<style>
  body {
    background-color: #DDF0FF;
    font-family: "Baskerville", "Times New Roman";
    padding-left: 10%;
    padding-right: 10%;
    padding-top: 30px;
    padding-bottom: 70px;
  }
  h1,h2,h3 {
    margin-left: 30%;
  }
  iframe#hidden_iframe {
    display: none;
  }
  p#javascript {
    margin-left: 40px;
    font-weight: bold;
    color: #0088AA;
  }
  .button {
    color: #FFFFFF;
    background-color: #0088AA;
    border: 1px solid #99AAFF;
    font-family: "Baskerville", "Times New Roman";
    min-width: 70px;
    max-width: 200px;
    padding-left: 20px;
    padding-right: 20px;
    padding-top: 10px;
    padding-bottom: 10px;
    text-align: center;
    cursor: pointer;
  }
  .button:hover {
    background-color: #0099CC;
  }
  .button.selected {
    background-color: #00AADD;
  }
  .button.selected:hover {
    background-color: #00BBEE;
  }
  div.centerButtons {
    display: flex;
    margin-left: 20%;
    margin-right: 20%;
    justify-content: center;
  }
  textarea {
    width: 80%;
    margin-left: 10%;
    background-color: #DDDEDF;
    padding: 5px;
    min-height: 500px;
    font-family: "Courier New", "Courier", monospace;
    resize: none;
  }
  img {
    width: 100%;
  }
  div#ahsDiv {
    text-align: center;
  }
  img#ahs {
    max-width: 200px;
  }
  ul.faq li {
    font-weight: bold;
  }
  span#hoyesel {
    font-weight: bold;
    font-size: 36px;
  }
  span.memeSpan {
    display: flex;
    justify-content: center;
    flex-direction: row;
    flex-wrap: wrap;
  }
  span#rampalmemes {
    display: none;
  }
  span.memeSpan img {
    width: 20%;
    height: 20%;
  }
  span.memeSpan#holidayMemes img {
    width: 15%;
    height: 15%;
  }
  div#manualInput {
    display: none;
  }
  p#disclaimer {
    font-size: 7px;
  }
  div#creditInfo {
    display: none;
  }
  .noBottomMargin {
    margin-bottom: 0;
  }
  .noTopMargin {
    margin-top: 0;
  }
</style>
</head>
<body>

<h3 class="noBottomMargin">Harys Dalvi's Aesthetically Pleasing</h3>
<h1 class="noTopMargin" id="sitename">AHS* Grade Calculator</h1>
<div id="topInfo">
<p id="disclaimer">
  *IMPORTANT: PLEASE READ THE FOLLOWING DISCLAIMER: &ldquo;Harys Dalvi's Aesthetically Pleasing AHS Grade Calculator&rdquo; is not endorsed by, directly
  affiliated with, maintained, authorized, or sponsored by American Learning Systems, Inc.
  or any of its subsidiaries or its affiliates. The names American Heritage School and AHS
  as well as related names, marks, emblems, and images are registered trademarks of their
  owners.
  Their use here does not imply that you may use them for any purpose other than for the same or a similar informational
  use as contemplated by the original author of &ldquo;Harys Dalvi's Aesthetically Pleasing AHS Grade Calculator&rdquo;.
  Your use of any such or similar incorporeal property is at your own risk.
  &ldquo;Harys Dalvi's Aesthetically Pleasing AHS Grade Calculator&rdquo; contains material which may portray an identifiable
  person (*cough cough* Mr. Rampal) affiliated with the American Heritage School of 6200 Linton Blvd, Delray Beach, Palm Beach County,
  Miami metropolitan area, Florida, Adams-On√≠s Treaty Land,
  United States Census Bureau Division 5 of Region 3, United States of America, North America, New World, Lithosphere, Planet Earth, Inner Planets, Solar System,
  Orion-Cygnus Spiral Arm, Milky Way Galaxy, Local Group, Virgo Cluster, Laniakea Supercluster, Universe.
  The use of images of living individuals is, in some jurisdictions, restricted by laws
  pertaining to personality rights, independent from their copyright status.
  &ldquo;Harys Dalvi's Aesthetically Pleasing AHS Grade Calculator&rdquo; should not be misconstrued as an attempt to usurp power and
  steal rights to administer American Heritage School or any of its affiliates.
</p>
<div id="ahsDiv"><img id="ahs" src="https://www.ahschool.com/data/news/thumbs/1579.full.jpg"></div>
</div>

<hr>
<div class="main" id="start">
  <p>Welcome to the grade calculator. First, you need to make sure you have
  JavaScript. If you don't know what that is, don't worry. I'll do it for you:</p>
  <p id="javascript">If you're reading this message, you do not have JavaScript.
    Unfortunately, you cannot use this page. If you're on a mobile device,
    try opening this with a computer. Check your browser settings to make sure
    JavaScript is on.</p><br><br>
  <script>
  document.getElementById("javascript").innerHTML = "If you're reading this message, you have JavaScript and can use this page.";
  </script>
  <div class="button" onclick="changeMode('FAQs')">Help</div><br>
  Begin by selecting a calculation:<br><br>
  <div class="centerButtons">
    <div class="button" onclick="changeMode('manual');" id="manualInput">Manual Input</div>
    <div class="button" onclick="changeMode('auto');" id="autoCalculation">Quarter grades</div>
  </div>
  <div class="centerButtons">
    <div class="button" onclick="changeMode('semester')">Semester/Exam grades</div>
    <div class="button" onclick="changeMode('gpaCalc')">GPA calculator</div>
  </div>
  <p>I will <strong>never</strong> use the information you give here to make fun of you. In fact, I don't know how to. I have
    no way of knowing what you type here because I am not good at programming in PHP. JavaScript is considered a &ldquo;client side&rdquo;
    programming language, which means all the code runs on your computer without transferring data anywhere else.</p>
  <br><p><b>Quarter Dates</b><br>
    Quarter 1: 08/19/19 &ndash; 10/18/19<br>
    Quarter 2: 10/21/19 &ndash; 12/20/19<br>
    Quarter 3: 01/06/20 &ndash; 03/13/20<br>
    Quarter 4: 03/16/20 &ndash; 05/28/20
  </p><br>
  <p>Did you know that Fritzgerald Duvigneaud got into Caltech, MIT, and UChicago?</p>
</div>
<div class="main" id="manual">
  <div class="button" onclick="changeMode('start')">Back</div><br>
  <p id="beginCategories">Begin by creating categories for grades. If the class is based on point system, make a category
    called something like "Total" and consider it 100% of your grade.</p>
  <p id="manualCategory"></p>
  <div id="manualCategories"></div><br>
  <div class="button" onclick="changeMode('category')">New Category</div>
</div>
<div class="main" id="category">
  <div class="button" onclick="changeMode('manual')">Back</div><br>
  <p>If the class is based on point system, make a category
    called something like "Total" and consider it 100% of your grade.
    Please don't make a category with an existing name, as I am too
    lazy to make sure you don't do so.</p>
  <form name="category" action = "javascript:void(0)">
    Name: <input name="name" type="text" size="15"></input><br>
    Percentage: <input name="percent" type="number" size="5"></input>%<br><br>
    <div class="button" onclick="createCategory();">Create category</div>
  </form>
</div>
<div class="main" id="editCategory">
  <div class="button" onclick="updateCategories(); changeMode('manual');">Done</div><br>
  <span id="editCategoryInfo"></span><br>
  <p>Enter Score/Possible. Examples: 5/6.0, 8.5/9, 3/3.<br>To delete an assignment, enter its score <strong>in
    the same way</strong> and click "Delete Assignment".<br>
    To <strong>change the grade on an assignment</strong>, add or remove an assignment out of 0 points (ex: 5/0).</p>
  <form name="editCategory" action = "javascript:void(0)">
    <input name="score" type="number" size="5"></input>/<input name="possible" type="number" size="5"></input><br>
    Letter grade: <select name="letter" onchange="addLetterGrade('letter');">
      <option value="">-- Select a letter grade --</option>
      <option value="A+">A+</option>
      <option value="A">A</option>
      <option value="A-">A-</option>
      <option value="B+">B+</option>
      <option value="B">B</option>
      <option value="B-">B-</option>
      <option value="C+">C+</option>
      <option value="C">C</option>
      <option value="C-">C-</option>
      <option value="D+">D+</option>
      <option value="D">D</option>
      <option value="D-">D-</option>
      <option value="NTI">NTI</option>
      <option value="LATE">LATE</option>
      <option value="AB">AB</option>
    </select><br>
    <br><br><div class="button" onclick="addAssignment()">Add Assignment</div>
    <div class="button" onclick="deleteAssignment()">Delete Assignment</div><br>
    <input name="percent" type="number" size="5"></input>%<br>
    <div class="button" onclick="changePercent()">Change Percentage</div>
  </form>
</div>
<div class="main" id="auto">
  <div class="button" onclick="changeMode('start')">Back</div>
  <p>Simply copy your grades
  from MyBackpack as shown in the image below.</p>
  <p>(If you are on a <strong>mobile device</strong>, including iPads, you should select <i>Assignment</i>,
    then select all the grades, and finally deselect the row that says <i>Assignment</i>)</p>
  <img src="auto.png">
  <p>Now paste them into the box below and click <strong>Next</strong> under the box:</p>
  <textarea id="inputGrades"></textarea><br>
  <div class="button" onclick="autoGrade();">Next</div>
</div>
<div class="main" id="finalAuto">
  <p>My super cool algorithm simplified your grades to the following (Category, Score/Possible):</p>
  <form name="gradesList"></form>
  <p><strong>If no grades have been entered yet</strong> for a category, that category may be missing from the above list.
    Don't worry, you can manually add that category after the calculation. Also don't worry if this class
    is based on <strong>point system</strong> rather than categories.</p><br>
  <p>Should I continue?</p>
  <div class="centerButtons">
    <div class="button" id="rampalButton" onclick="autoGrade(rampal=true);">Click here for Mr. Rampal's class</div>
  </div>
  <div class="centerButtons">
    <div class="button" onclick="changeMode('manual')">Manually enter grades</div>
    <div class="button" onclick="autoCats(); changeMode('autoCategories');">Continue</div>
  </div>
</div>
<div class="main" id="autoCategories">
  <p><strong>Select a class</strong> to automatically fill in percentages/weighting. (Credit to Adin Groper for this idea)</p>
  <form name="classes" action="javascript:void(0)"><select name="class" onchange="setclass();">
    <option value="">-- Select a class --</option>
    <option value="add class">Add a class to this list</option>
    <optgroup label="Core Classes">
      <option value="apush">American History (AP)</option>
      <option value="ap bio">Biology (H/AP)</option>
      <option value="ap chem">Chemistry (AP)</option>
      <option value="english 2">English II (H)</option>
      <option value="ap lang brown">English Language & Composition (AP, Brown)</option>
      <option value="ap lang meyer">English Language & Composition (AP, Meyer)</option>
      <option value="ap enviro">Environmental Science (AP)</option>
      <option value="spanish 4">Espa√±ol IV (H)</option>
      <option value="ap macro">Macroeconomics (AP)</option>
      <option value="ap physics 1">Physics 1 (AP)</option>
      <option value="precalc">Pre-Calculus (H)</option>
      <option value="stats">Statistics (AP)</option>
      <option value="mandarin 3">‰∏≠Êñá‰∏â</option>
    </optgroup>
    <optgroup label="Electives">
      <option value="alice">Alice Coding in Java (HH)</option>
      <option value="research">Scientific/Summer Research</option>
    </optgroup>
  </select></form>
  <p>Please enter a percentage for each category <strong><i>or</i></strong> check that this class is point system:</p>
  <form name="autoCategories" action="javascript:void(0)"></form>
  <br><span id="classError"></span>
  <br><span id="hoyesel"></span>
  <br><span class="memeSpan" id="rampalmemes">
    <img src="rampal/rampal3.jpg"><br>
    <img src="rampal/rampal4.jpg"><br>
    <img src="rampal/rampal5.jpg"><br>
    <img src="rampal/rampal6.png"><br>
    <p>Credit to Gabriel Sun for <cite>No.</cite> and Josh Doischen for <cite>In loving memory</cite><br><br>
    ‡§ú‡§Ø ‡§∂‡•ç‡§∞‡•Ä ‡§∞‡§æ‡§Æ‡§™‡§æ‡§≤ (<i>Jai Shri Rampal</i>)</p>
  </span>
</div>
<div class="main" id="addClass">
  <div class="button" onclick="changeMode('autoCategories')">Back</div>
  <iframe width="0" height="0" border="0" name="hidden_iframe" id="hidden_iframe"></iframe><br>
  <span id="mail_sent"></span><br>
  <form name="add_class" autocomplete="off" action="https://docs.google.com/forms/u/0/d/e/1FAIpQLScQ5kMZk6A-iFj88TgNe8iPgKBQ6TwhIZH4dYZfHi7rreipSQ/formResponse" method="POST" onsubmit="submitted=!0" target="hidden_iframe">
    <p>To figure out if a class is point system or categories, check how much quizzes, homework, and tests are worth.
      If they are out of about the same number of points, it is categories. Otherwise, it may be point system.</p>
    Name of class: <input type="text" name="entry.1399913855" placeholder="ex: AP Chem" required></input><br>
    <p>For <strong>point system</strong>, type &ldquo;point system&rdquo; for names and weights.</p>
    EXACT names of categories as they appear in MyBackpack: <input type="text" name="entry.1953535029" placeholder="ex: Quizzez, Test, Labs, Homework/Classwork" size="50" required></input><br>
    Weight of each category in above order: <input type="text" name="entry.1262923778" placeholder="ex: 15%, 50%, 25%, 10%" size="25" required></input><br>
    Notes (optional): <input type="text" name="entry.1902727374" size="40" placeholder="ex: Your name or the teacher's name"></input><br>
    <button class="button" type="submit" value="Send" onclick="mailSent();">Submit</button>
  </form>
</div>
<div class="main" id="FAQs">
  <div class="button" onclick="changeMode('start')">Back</div>
  <h3>Frequently Asked Questions</h3>
  <ul class="faq">
    <li>Q: Why doesn't it work?</li>
    <b>A:</b> This algorithm is definitely foolproof and if it doesn't work something is wrong with the input.
    Make sure to <strong>read all instructions <em>carefully</em></strong>.
    <li>Q: What if a category is missing?</li>
    <b>A:</b> If a category is missing, <strong>enter its normal percentage</strong> and everything will be ok. For example, if there is no test grade in for AP Lang,
    enter 5% for MC Quizzes, 25% for Quizzes, and 20% for Homework.
    <li>Q: Can you add my class?</li>
    <b>A:</b> Yes. Contact me somehow and give me the grading scale for the class, the name of the class, and the <u><em>exact</em></u> names of the categories in MyBackpack.
    You can also fill out a form when choosing a class.
    <li>Q: Why did you make this?</li>
    <b>A:</b> I noticed people taking too long to calculate their grades and decided to ease their pain using my mad skillz.
    <li>Q: How did you make this?</li>
    <b>A:</b> I used a combination of HTML (to make it exist), CSS (to make it aesthetically pleasing), and JavaScript (to make it work).
    JavaScript is a superior language to Java, from which it is entirely separate. Anyone who says Java is better than JavaScript
    without referencing Minecraft is wrong.
    <li>Q: How are you so cool?</li>
    <b>A:</b> I don't try to be cool, it's all natural. I would like to thank Fritz for being cool.
  </ul>
</div>
<div class="main" id="semester">
  <br><div class="button" onclick="changeMode('start')">Back</div><br>
  <h4>Minimum exam grade required</h4>
  <form name="semester" action="javascript:void(0)">
    Quarter 1/3 grade: <select name="q1" onchange="calculateSemester();">
      <option value="98.5">A+</option>
      <option value="95">A</option>
      <option value="91.5">A-</option>
      <option value="88.5">B+</option>
      <option value="85">B</option>
      <option value="81.5">B-</option>
      <option value="78.5">C+</option>
      <option value="75">C</option>
      <option value="71.5">C-</option>
      <option value="68.5">D+</option>
      <option value="65">D</option>
      <option value="61.5">D-</option>
    </select><br>
    Quarter 2/4 grade: <select name="q2" onchange="calculateSemester();">
      <option value="98.5">A+</option>
      <option value="95">A</option>
      <option value="91.5">A-</option>
      <option value="88.5">B+</option>
      <option value="85">B</option>
      <option value="81.5">B-</option>
      <option value="78.5">C+</option>
      <option value="75">C</option>
      <option value="71.5">C-</option>
      <option value="68.5">D+</option>
      <option value="65">D</option>
      <option value="61.5">D-</option>
    </select><br>
    I want at least: <select name="target" onchange="calculateSemester();">
      <option value="96.5">A+</option>
      <option value="92.5">A</option>
      <option value="89.5">A-</option>
      <option value="86.5">B+</option>
      <option value="82.5">B</option>
      <option value="79.5">B-</option>
      <option value="76.5">C+</option>
      <option value="72.5">C</option>
      <option value="69.5">C-</option>
      <option value="66.5">D+</option>
      <option value="62.5">D</option>
      <option value="59.5">D-</option>
    </select><br>
  </form>
  <b><span id="semesterGrade">Minimum grade required on semester exam: 86.5% (goes in as B+/88.5%)<br>
    Select grades above to calculate</span></b><br><br>
  <b><h4>Semester grade with exam</h4></b>
  <form name="exam" action="javascript:void(0)">
    Quarter 1/3 grade: <select name="q1" onchange="calculateExam();">
      <option value="98.5">A+</option>
      <option value="95">A</option>
      <option value="91.5">A-</option>
      <option value="88.5">B+</option>
      <option value="85">B</option>
      <option value="81.5">B-</option>
      <option value="78.5">C+</option>
      <option value="75">C</option>
      <option value="71.5">C-</option>
      <option value="68.5">D+</option>
      <option value="65">D</option>
      <option value="61.5">D-</option>
    </select><br>
    Quarter 2/4 grade: <select name="q2" onchange="calculateExam();">
      <option value="98.5">A+</option>
      <option value="95">A</option>
      <option value="91.5">A-</option>
      <option value="88.5">B+</option>
      <option value="85">B</option>
      <option value="81.5">B-</option>
      <option value="78.5">C+</option>
      <option value="75">C</option>
      <option value="71.5">C-</option>
      <option value="68.5">D+</option>
      <option value="65">D</option>
      <option value="61.5">D-</option>
    </select><br>
    Exam grade: <select name="exam" onchange="calculateExam();">
      <option value="98.5">A+</option>
      <option value="95">A</option>
      <option value="91.5">A-</option>
      <option value="88.5">B+</option>
      <option value="85">B</option>
      <option value="81.5">B-</option>
      <option value="78.5">C+</option>
      <option value="75">C</option>
      <option value="71.5">C-</option>
      <option value="68.5">D+</option>
      <option value="65">D</option>
      <option value="61.5">D-</option>
    </select><br>
  </form>
  <b><span id="examGrade">Grade for the semester: A+ (98.50)<br>
    Select grades above to calculate</span></b>
</div>
<div class="main" id="gpaCalc">
  <br><div class="button" onclick="changeMode('start');">Back</div><br>
  <h2 class="noBottomMargin">Ritvik Teegavarapu AHS GPA Calculator</h2>
  <h3 class="noTopMargin">Suggested by and named in honor of Ritvik Teegavarapu</h3>
  <div id="gpaData"></div>
  <form name="addCredit">
    <input type="radio" name="weights" value="weighted" onchange="updateGpa()" checked></input>Weighted GPA (AHS weighting)<br>
    <input type="radio" name="weights" value="fivescale" onchange="updateGpa()"></input>5.0 Scale<br>
    <input type="radio" name="weights" value="fourscale" onchange="updateGpa()"></input>4.0 Scale<br>
    <select name="letterGrade">
      <option value="A+">A+</option>
      <option value="A">A</option>
      <option value="A-">A-</option>
      <option value="B+">B+</option>
      <option value="B">B</option>
      <option value="B-">B-</option>
      <option value="C+">C+</option>
      <option value="C">C</option>
      <option value="C-">C-</option>
      <option value="D+">D+</option>
      <option value="D">D</option>
      <option value="D-">D-</option>
      <option value="F">F</option>
    </select>
    <select name="classType">
      <option value="AP">AP/HH</option>
      <option value="H">H</option>
      <option value="CP">CP</option>
    </select>
    <select name="numCredits">
      <option value="0.5">Semester</option>
      <option value="0.25">Quarter</option>
    </select>
    <div class="button" onclick="addGpaUnit()">Add</div>
  </form>
  <br><br><p><b>Modify/delete grades</b></p>
  <form name="modifyCredit">
    Credit number <input type="text" name="creditNum" onchange="creditInfo()"></input>
    <div class="button" onclick="creditInfo()" id="getCreditButton">View credit</div><br>
    <div id="creditInfo">
      <select name="letterGrade">
        <option value="A+">A+</option>
        <option value="A">A</option>
        <option value="A-">A-</option>
        <option value="B+">B+</option>
        <option value="B">B</option>
        <option value="B-">B-</option>
        <option value="C+">C+</option>
        <option value="C">C</option>
        <option value="C-">C-</option>
        <option value="D+">D+</option>
        <option value="D">D</option>
        <option value="D-">D-</option>
        <option value="F">F</option>
      </select>
      <select name="classType">
        <option value="AP">AP/HH</option>
        <option value="H">H</option>
        <option value="CP">CP</option>
      </select>
      <select name="numCredits">
        <option value="0.5">Semester</option>
        <option value="0.25">Quarter</option>
      </select>
      <div class="button" onclick="editCredit()">Apply</div>
      <div class="button" onclick="deleteCredit()">Delete</div>
    </div>
  </form>
  <span class="memeSpan">
    <img src="ritvik/ritvik1.jpeg">
    <img src="ritvik/ritvik2.jpeg">
    <img src="ritvik/ritvik3.JPG">
  </span>
</div>

<script>
var mode = "start";
var categories = [];
var currentCategory = null;
var divs = document.getElementsByClassName("main");
var autoCalc = [];
var semesters = [];
var gpaData = [];
function changeMode(mode) {
  for (var i = 0; i < divs.length; i++) {
    if (divs[i].id != mode)
      divs[i].style.display = "none";
    else
      divs[i].style.display = "block";
  }
  if (mode == "start") {
    document.getElementById("topInfo").style.display = "block";
    document.getElementById("sitename").innerHTML = "AHS* Grade Calculator";
  } else {
    document.getElementById("topInfo").style.display = "none";
    document.getElementById("sitename").innerHTML = "AHS Grade Calculator";
  }
}
changeMode("start");
function makeNumber(grade, possible=100.0) {
  switch(grade) {
    case "A+": grade=98.5; break;
    case "A": grade=95; break;
    case "A-": grade=91.5; break;
    case "B+": grade=88.5; break;
    case "B": grade=85; break;
    case "B-": grade=81.5; break;
    case "C+": grade=78.5; break;
    case "C": grade=75; break;
    case "C-": grade=71.5; break;
    case "D+": grade=68.5; break;
    case "D": grade=65; break;
    case "D-": grade=61.5; break;
    case "F+": grade=58.5; break;
    case "F": grade=30; break;
    case "F-": grade=0; break;
    case "NTI": grade = 0; break;
    case "LATE": grade = 50; break;
    case "AB": grade = 0; break;
    default: return new Number(grade);
  }
  return new Number(grade*possible/100.0);
}
class Category {
  constructor(name, percentage) {
    this.name = name;
    this.percentage = percentage;
    this.total = 0.0;
    this.possible = 0.0;
    categories.push(this);
  }
  add(total, possible, countAs=1.0) {
    this.total += makeNumber(total, possible)*countAs;
    this.possible += makeNumber(possible)*countAs;
  }
  remove (total, possible) {
    this.total -= makeNumber(total, possible);
    this.possible -= makeNumber(possible);
  }
  score() {
    return (this.total/this.possible)*100.0;
  }
}
function roundDecimal(num, places) {
  if (isNaN(num)) return "ERROR";
  var n = Math.round(num*Math.pow(10.0, places))/Math.pow(10.0, places);
  n = n.toString();
  var decimals = n.slice(n.indexOf(".") + 1).length;
  if (n.indexOf(".") == -1) {
    decimals = 0;
    n += ".";
  }
  for (var i = 0; i < places-decimals; i++) n += "0";
  return n;
}
function letterGrade(num) {
  num = Math.round(num*100)/100.0;
  if (num >= 96.5) return "A+";
  if (num >= 92.5) return "A";
  if (num >= 89.5) return "A-";
  if (num >= 86.5) return "B+";
  if (num >= 82.5) return "B";
  if (num >= 79.5) return "B-";
  if (num >= 76.5) return "C+";
  if (num >= 72.5) return "C";
  if (num >= 69.5) return "C-";
  if (num >= 66.5) return "D+";
  if (num >= 62.5) return "D";
  if (num >= 59.5) return "D-";
  return "F";
}
function updateCategories() {
  var categoryP = document.getElementById("manualCategory");
  var categoryList = document.getElementById("manualCategories");
  document.getElementById("beginCategories").innerHTML = categories.length > 0 ? "" :
    "Begin by creating categories for grades. If the class is based on point system, make a category called something like \"Total\" and consider it 100% of your grade.";
  categoryList.innerHTML = "<strong>Click a category</strong> to add or remove assignments and to see that category's score.<br><br>Categories:<br>";
  var totalPercent = 0;
  var categoryScore = 0;
  var totalScore = 0;
  for (var i = 0; i < categories.length; i++) {
    let newCategory = document.createElement("div");
    categoryList.appendChild(newCategory);
    newCategory.innerHTML = categories[i].name + " (" + categories[i].percentage + "%)";
    newCategory.className = "button";
    newCategory.onclick = function(cat) { return function() {
      currentCategory = cat;
      document.editCategory.percent.value = currentCategory.percentage;
      changeMode("editCategory");
      document.getElementById("editCategoryInfo").innerHTML = "Average in " + currentCategory.name +
        ": " + roundDecimal(currentCategory.score(), 2) + "%";
    }}(categories[i]);
    if (currentCategory != null && categories[i].name == currentCategory.name) {
      newCategory.className = "button selected";
      categoryScore = categories[i].score();
    }
    totalPercent += categories[i].percentage;
    totalScore += categories[i].score()*categories[i].percentage/100.0;
  }
  totalScore /= (totalPercent/100.0);
  categoryP.innerHTML = "Score so far in this class: " + roundDecimal(totalScore, 2) + "% (Letter grade: " + letterGrade(totalScore) + ")<br>" +
    "Unweighted GPA: " + roundDecimal(totalScore/20.0 - 1, 2) +
    "<br>Sum of all categories: " + Math.round(totalPercent) + "% (Should be 100%)<br>";
  if (currentCategory == null)
    categoryP.innerHTML += "No category is currently selected";
  else {
    categoryP.innerHTML += "Score so far in " + currentCategory.name + ": " + roundDecimal(categoryScore, 2) + "%";
  }
  if (isNaN(totalScore))
    categoryP.innerHTML += "<br><b>You have a denominator of zero or another error in at least one category." +
      " Try adding some assignments.</b>";
}
function createCategory() {
  currentCategory = new Category(document.category.name.value, new Number(document.category.percent.value));
  document.category.name.value = "";
  document.category.percent.value = "";
  updateCategories();
  changeMode("manual");
}
function addAssignment() {
  currentCategory.add(document.editCategory.score.value, document.editCategory.possible.value);
  document.editCategory.score.type = "number";
  document.editCategory.score.value = "";
  document.editCategory.possible.value = "";
  document.getElementById("editCategoryInfo").innerHTML = "Average in " + currentCategory.name +
    ": " + roundDecimal(currentCategory.score(), 2) + "%";
}
function deleteAssignment() {
  currentCategory.remove(document.editCategory.score.value, document.editCategory.possible.value);
  document.editCategory.score.type = "number";
  document.editCategory.score.value = "";
  document.editCategory.possible.value = "";
  document.getElementById("editCategoryInfo").innerHTML = "Average in " + currentCategory.name +
    ": " + roundDecimal(currentCategory.score(), 2) + "%";
}
function changePercent() {
  currentCategory.percentage = new Number(document.editCategory.percent.value);
}
function findCategories(autoResult) {
  var cats = [];
  for (var i = 0; i < autoResult.length; i++) {
    if (cats.indexOf(autoResult[i][0]) == -1)
      cats.push(autoResult[i][0]);
  }
  cats.sort();
  return cats;
}
if(typeof(String.prototype.trim) === "undefined")
{
    String.prototype.trim = function()
    {
        return String(this).replace(/^\s+|\s+$/g, '');
    };
}
var previousInput = "";
var RAMPAL = false;
function auto_filter(el) {
  return el != "" && el != " ";
}
function isNotGrade(g) {
  if (isNaN(makeNumber(g, 100.0))) {
    if (["", " ", "P", "EXC", "EX"].indexOf(g) == -1)
      return true;
    else
      return false;
  } else {
    return false;
  }
}
function autoGrade(rampal=false) {
  var temp = [];
  var temp2 = [];
  if (rampal) {
    document.getElementById("rampalButton").style.display = "none";
    document.getElementById("rampalmemes").style.display = "flex";
    RAMPAL = true;
  } else {
    previousInput = document.getElementById("inputGrades").value;
    document.getElementById("rampalButton").style.display = "block";
    document.getElementById("rampalmemes").style.display = "none";
    RAMPAL = false;
  }
  autoCalc = previousInput.split("\n");
  document.getElementById("inputGrades").value = "";
  while (autoCalc.indexOf("Comment") != -1 || autoCalc.indexOf("Missing Assignment") != -1)
    autoCalc.shift();
  try {
    firstItem = autoCalc[0].trim().split("\t").filter(auto_filter);
    secondItem = autoCalc[1].trim().split("\t").filter(auto_filter);
    if (firstItem.length <= 2 && secondItem.length >= 3)
      lineSystem = 2;
    else
      lineSystem = 1;
  } catch(err) {
    lineSystem = 2;
  }
  for (var i = lineSystem-1; i < autoCalc.length; i += lineSystem) {
    autoCalc[i] = autoCalc[i].trim();
    let splitArray = autoCalc[i].split("\t");
    while (isNotGrade(splitArray[1]))
      splitArray.shift();
    temp = [];
    temp.push(splitArray[0]);
    temp.push(splitArray[1]);
    temp.push(splitArray[2]);
    if (["", " ", "P", "EXC", "EX"].indexOf(temp[1]) == -1)
      temp2.push(temp);
  }
  autoCalc = temp2;
  document.gradesList.innerHTML = "";
  for (var i = 0; i < temp2.length; i++) {
    if (RAMPAL) {
      document.gradesList.innerHTML += temp2[i][0] + ", " +
        temp2[i][1] + "/" + temp2[i][2] + " (Count as <input name=\"" + i + "\" type=\"number\" value=\"1.0\">)<br>";
    } else {
      document.gradesList.innerHTML += temp2[i][0] + ", " +
        temp2[i][1] + "/" + temp2[i][2] + "<br>";
    }
  }
  document.gradesList.innerHTML += "<br>" + findCategories(autoCalc).length +
    " categories found: ";
  document.gradesList.innerHTML += findCategories(autoCalc);
  if (RAMPAL) {
    document.gradesList.innerHTML += "<br><br><b>Do the following for <em>each</em> assignment:</b><br>Click on the assignment<br>" +
      "<img src=\"rampal/rampal1.png\"><br><img src=\"rampal/rampal2.png\"><br>Look at the <strong>\"Count as\"</strong> and enter it above";
  }
  changeMode("finalAuto");
}
function autoCats() {
  var form = document.autoCategories;
  var cats = findCategories(autoCalc);
  form.innerHTML = "";
  for (var i = 0; i < cats.length; i++) {
    form.innerHTML += cats[i] + ": <input name='" + i + "' type='number'></input>%<br>";
  }
  form.innerHTML += '<input type="checkbox" name="point"></input> This class is point system<br>'
  form.innerHTML += '<br><div class="button" onclick="autoCalc2();" id="continueClass">Next</div>';
  if (RAMPAL) {
    form.point.checked = false;
    if (cats.length == 2) {
      form[0].value = 10;
      form[1].value = 90;
    } if (cats.length == 3) {
      form[0].value = 10;
      form[1].value = 10;
      form[2].value = 80;
    }
  }
}
function categoryByName(name) {
  for (var i = 0; i < categories.length; i++) {
    if (categories[i].name == name) return categories[i];
  }
  return null;
}
function autoCalc2() {
  var cats = findCategories(autoCalc);
  categories = [];
  if (document.autoCategories.point.checked) {
    currentCategory = new Category("Total", 100);
    for (var i = 0; i < autoCalc.length; i++) {
      categories[0].add(autoCalc[i][1], autoCalc[i][2]);
    }
  } else {
    for (var i = 0; i < cats.length; i++) {
      new Category(cats[i], new Number(document.autoCategories[new Number(i).toString()].value));
    }
    var countAs = 1.0;
    for (var i = 0; i < autoCalc.length; i++) {
      if (RAMPAL) countAs = new Number(document.gradesList[i].value);
      else countAs = 1.0;
      categoryByName(autoCalc[i][0]).add(autoCalc[i][1], autoCalc[i][2], countAs);
    }
    currentCategory = null;
  }
  updateCategories();
  changeMode("manual");
  document.getElementById("manualInput").style.display = "block";
  document.getElementById("manualInput").innerHTML = "Edit grades";
  document.getElementById("autoCalculation").innerHTML = "New class (automatic)";
}
var classes = {
  "ap lang brown": [["h", "m", "q", "t"], [false, 20, 5, 25, 50]],
  "ap lang meyer": [["a", "g", "q", "t"], [false, 5, 20, 25, 50]],
  "ap chem": [["h", "l", "q", "t"], [false, 10, 25, 15, 50]],
  "ap bio": [[], [true]],
  "ap enviro": [[], [true]],
  "ap physics 1": [[], [true]],
  "spanish 4": [["h", "p", "q", "t"], [false, 10, 30, 25, 35]],
  "research": [[], [true]],
  "precalc": [[], [true]],
  "mandarin 3": [["h", "p", "q", "t"], [false, 10, 30, 25, 35]],
  "stats": [["f", "m", "s", "t"], [false, 18, 20, 2, 60]],
  "alice": [["a", "h", "ta", "te"], [false, 25, 20, 20, 35]],
  "ap macro": [["h", "p", "q", "t"], [false, 20, 10, 30, 40]],
  "apush": [["c", "f", "q", "t"], [false, 20, 20, 20, 40]],
  "english 2": [["c", "l", "s", "w"], [false, 25, 35, 5, 35]]
};
function setclass() {
  if (document.classes.class.value == "add class") {
    document.classes.class.value = "";
    document.add_class["entry.1953535029"].value = findCategories(autoCalc);
    changeMode('addClass');
  } else {
    var catLetters = classes[document.classes.class.value][0];
    var catData = classes[document.classes.class.value][1];
    var classCats = findCategories(autoCalc);
    document.autoCategories.point.checked = catData[0];
    for (var i = 0; i < catLetters.length; i++) {
      try {
        for (var j = 0; j < classCats.length; j++) {
          if (classCats[j].toLowerCase().startsWith(catLetters[i]))
            document.autoCategories[j].value = catData[i+1];
        }
      } catch (err) {}
    }
    if (document.classes.class.value == "spanish 4") {
      date = new Date();
      document.getElementById("hoyesel").innerHTML = "HOY ES EL " +
        ["PRIMERO", "DOS", "TRES", "CUATRO", "CINCO", "SEIS", "SIETE", "OCHO", "NUEVE", "DIEZ",
        "ONCE", "DOCE", "TRECE", "CATORCE", "QUINCE", "DIECIS√âIS", "DIECISIETE", "DIECIOCHO",
        "DIECINUEVE", "VEINTE", "VEINTIUNO", "VEINTID√ìS", "VEINTITRES", "VEINTICUATRO",
        "VEINTICINCO", "VEINTIS√âIS", "VEINTISIETE", "VEINTIOCHO", "VEINTINUEVE", "TREINTA",
        "TREINTA Y UNO"][date.getDate() - 1] +
        " DE " + ["ENERO", "FEBRERO", "MARZO", "ABRIL", "MAYO", "JUNIO", "JULIO", "AGOSTO",
        "SEPTIEMBRE", "OCTUBRE", "NOVIEMBRE", "DICIEMBRE"][date.getMonth()] + " DE "
        + date.getFullYear() + "!!!!!";
    } else {
      document.getElementById("hoyesel").innerHTML = "";
    }
    document.classes.class.value = "";
  }
}
function calculateSemester() {
  var target = new Number(document.semester.target.value);
  var q1 = new Number(document.semester.q1.value);
  var q2 = new Number(document.semester.q2.value);
  var grade = q1*0.4 + q2*0.4;
  var exam = 0;
  var required = -1;
  var grades = [61.5, 65, 68.5,
                71.5, 75, 78.5,
                81.5, 85, 88.5,
                91.5, 95, 98.5];
  var min = [59.5, 62.5, 66.5,
             69.5, 72.5, 76.5,
             79.5, 82.5, 86.5,
             89.5, 92.5, 96.5];
  for (var i = 0; i < 12; i++) {
    exam = grades[i];
    if (grade + exam*0.2 >= target) {
      required = i;
      break;
    }
  }
  var gradeDisplay = document.getElementById("semesterGrade");
  if (required == -1)
    gradeDisplay.innerHTML = "Unfortunately this grade is not possible for you this semester. Good luck for next semester!";
  else
    gradeDisplay.innerHTML = "Minimum grade required on semester exam: " + min[required] + "% (goes in as " + letterGrade(grades[required]) +
      "/" + grades[required] + "%)";
  var fail = -1;
  for (var i = 59; i >= 0; i--) {
    if (grade + i*0.2 >= target)
      fail = i;
  }
  if (fail != -1)
    gradeDisplay.innerHTML = "Minimum grade required on semester exam: " + fail + "% (I hope you don't Fritz the exam that badly)";
}
function mailSent() {
  if (document.add_class["entry.1399913855"].value == "" ||
    document.add_class["entry.1953535029"].value == "" ||
    document.add_class["entry.1262923778"].value == "")
      document.getElementById("mail_sent").innerHTML = "Please enter valid data.";
  else {
    document.getElementById("mail_sent").innerHTML = "Your response was sent and the class should be available shortly. Thank you!" +
      "<br>For now, go back and enter weightings manually.";
    document.add_class.style.display = "none";
    document.classes.class.remove(1);
  }
}
function calculateExam() {
  var exam = new Number(document.exam.exam.value);
  var q1 = new Number(document.exam.q1.value);
  var q2 = new Number(document.exam.q2.value);
  var grade = q1*0.4 + q2*0.4 + exam*0.2;
  var gradeDisplay = document.getElementById("examGrade");
  examGrade.innerHTML = "Grade for the semester: " + letterGrade(grade) + " (" + roundDecimal(grade, 2) + ")"
}
function updateGpa() {
  var g = document.getElementById("gpaData");
  g.innerHTML = "";
  var weighted = document.addCredit.weights.value == "weighted";
  var fivescale = document.addCredit.weights.value == "fivescale";
  totalGpa = 0.0;
  totalCredits = 0.0;
  for (var i = 0; i < gpaData.length; i++) {
    let gpa = {"A+": 13,
      "A": 12,
      "A-": 11,
      "B+": 10,
      "B": 9,
      "B-": 8,
      "C+": 7,
      "C": 6,
      "C-": 5,
      "D+": 4,
      "D": 3,
      "D-": 2,
      "F": 0
    }[gpaData[i][0]];
    if (weighted) {
      gpa += {"AP": 7.0, "H": 4.0, "CP": 1.0}[gpaData[i][1]];
    } else {
      if (gpa == 13)
        gpa = 12;
      if (gpa < 3)
        gpa = 0;
      else if (fivescale)
        gpa += {"AP": 3.0, "H": 1.5, "CP": 0.0}[gpaData[i][1]];
    }
    gpa /= 3.0;
    totalGpa += (Math.round(gpa*100)/100.0)*gpaData[i][2];
    totalCredits += gpaData[i][2];
    g.innerHTML += "" + (i+1) + ": " + roundDecimal(gpa, 2) + " (" +
      gpaData[i][0] + ", " + gpaData[i][1] + ", " + gpaData[i][2] + " credits)<br>";
  }
  g.innerHTML += "<b>GPA sum: " + roundDecimal(totalGpa, 2) + "<br>Total credits: " + roundDecimal(totalCredits, 1) +
   "<br>Cumulative GPA: " + roundDecimal(totalGpa/totalCredits, 4) + "</b>";
}
function addGpaUnit() {
  f = document.addCredit;
  gpaData.push(new Array(f.letterGrade.value, f.classType.value, new Number(f.numCredits.value)));
  updateGpa();
}
function creditInfo() {
  i = new Number(document.modifyCredit.creditNum.value) - 1;
  document.modifyCredit.letterGrade.value = gpaData[i][0];
  document.modifyCredit.classType.value = gpaData[i][1];
  document.modifyCredit.numCredits.value = gpaData[i][2];
  document.getElementById("creditInfo").style.display = "block";
  document.getElementById("getCreditButton").style.display = "none";
}
function hideCreditInfo() {
  document.getElementById("creditInfo").style.display = "none";
  document.getElementById("getCreditButton").style.display = "block";
}
function editCredit() {
  i = new Number(document.modifyCredit.creditNum.value) - 1;
  document.modifyCredit.creditNum.value = "";
  gpaData[i][0] = document.modifyCredit.letterGrade.value;
  gpaData[i][1] = document.modifyCredit.classType.value;
  gpaData[i][2] = new Number(document.modifyCredit.numCredits.value);
  hideCreditInfo();
  updateGpa();
}
function deleteCredit() {
  i = new Number(document.modifyCredit.creditNum.value) - 1;
  document.modifyCredit.creditNum.value = "";
  gpaData.splice(i, 1);
  hideCreditInfo();
  updateGpa();
}
function addLetterGrade() {
  document.editCategory.score.type = "text";
  document.editCategory.score.value = document.editCategory["letter"].value;
  document.editCategory["letter"].value = "";
}
</script>
<br><br><br><br><br><br><br><br><br><br>
</body>
</html>
